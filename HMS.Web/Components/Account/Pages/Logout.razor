@*
 * FILE: Logout.razor
 * PURPOSE: Frontend web component.
 * COMMUNICATES WITH: None
*@
@page "/Account/Logout"
@using Microsoft.AspNetCore.Identity
@using HMS.Web.Data

@inject SignInManager<ApplicationUser> SignInManager
@inject NavigationManager NavigationManager

<PageTitle>Logging Out...</PageTitle>

<div
    style="display: flex; justify-content: center; align-items: center; height: 100vh; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
    <RadzenCard
        Style="padding: 3rem; text-align: center; max-width: 400px; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
        <RadzenStack Gap="1.5rem" AlignItems="AlignItems.Center">
            <RadzenIcon Icon="logout" Style="font-size: 4rem; color: var(--rz-primary);" />
            <RadzenText Text="Logging Out" TextStyle="TextStyle.H5" Class="rz-font-weight-bold" />
            <RadzenText Text="Please wait while we securely sign you out..." TextStyle="TextStyle.Body2"
                Class="rz-color-text-secondary" />
            <RadzenProgressBarCircular ShowValue="false" Mode="ProgressBarMode.Indeterminate"
                Size="ProgressBarCircularSize.Large" />
        </RadzenStack>
    </RadzenCard>
</div>

@code {
    protected override async Task OnInitializedAsync()
    {
        // Sign out the user
        await SignInManager.SignOutAsync();

        // Small delay for UX (let the user see the logout message)
        await Task.Delay(500);

        // Redirect to home page with force reload to clear all state
        NavigationManager.NavigateTo("/", forceLoad: true);
    }
}

